CREATE TABLE IF NOT EXISTS producto_variacion (
    id_variacion    integer generated by default as identity primary key,
    id_producto     integer NOT NULL,
    sku VARCHAR(50)  NOT NULL,
    precio           NUMERIC(10,2),
    stock            INTEGER,
    atributos_json   JSONB,
    imagen_url       VARCHAR(255),
    created_at       TIMESTAMP DEFAULT now(),
    updated_at       TIMESTAMP DEFAULT now(),

    CONSTRAINT fk_variacion_producto
        FOREIGN KEY (id_producto) REFERENCES producto(id_producto),
    CONSTRAINT ux_variacion_producto_sku UNIQUE (id_producto, sku)
);
